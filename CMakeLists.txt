cmake_minimum_required(VERSION 3.16)
project(Spongelang LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# ğŸ”¥ install prefix ê°•ì œ ì„¤ì • (ê°€ì¥ ìœ„)
set(CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}" CACHE PATH "" FORCE)

# ---- META MODULE ----
add_subdirectory(src/meta)

# ---- CORE SOURCES ----
file(GLOB_RECURSE CORE_SRC
    "src/*.cpp"
)

list(FILTER CORE_SRC EXCLUDE REGEX "src/meta/.*")

add_executable(spongelang ${CORE_SRC})

target_include_directories(spongelang PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/src
)

target_link_libraries(spongelang PRIVATE meta_engine)

# ------------------------------------------------
# ğŸ”¥ğŸ”¥ğŸ”¥ install() ì€ í•­ìƒ target ì •ì˜ ëë‚œ ë’¤ ë§¨ ì•„ë˜!!
# ------------------------------------------------
install(TARGETS spongelang
    RUNTIME DESTINATION bin
)
